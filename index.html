<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Pement Collect</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    <script src="https://unpkg.com/html5-qrcode"></script>
    <style>
        /* ----- HARD PROTECTION (DESKTOP ONLY) ----- */
        * {
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
            -webkit-touch-callout: default !important;
            -webkit-user-drag: none;
        }
        body { 
            background: #f4f7fa; 
            font-family: 'Inter', sans-serif; 
            display: flex; 
            flex-direction: column; 
            align-items: center; 
            justify-content: center; 
            min-height: 100vh; 
            margin: 0; 
            padding: 16px;
            overflow-x: hidden;
            position: relative;
        }

        /* ----- FULLY RESPONSIVE WALLET ----- */
        .wallet-case { 
            position: relative; 
            width: 100%; 
            max-width: 360px; 
            aspect-ratio: 350/520; 
            background: #ffffff; 
            border-radius: 40px; 
            box-shadow: 0 30px 60px rgba(0,0,0,0.12); 
            overflow: hidden; 
            border: 6px solid #f8fafc; 
            margin: 0 auto;
        }
        .qr-card, .id-card { 
            padding: 16px; 
            box-sizing: border-box; 
        }
        .qr-card { 
            position: absolute; 
            inset: 0; 
            background: #ffffff; 
            z-index: 30; 
            display: flex; 
            flex-direction: column; 
            align-items: center; 
            justify-content: center; 
            transition: all 0.8s cubic-bezier(0.85, 0, 0.15, 1); 
            cursor: pointer; 
        }
        .wallet-case.active .qr-card { 
            transform: translateY(105%); 
        }
        .id-card { 
            position: absolute; 
            inset: 0; 
            background: linear-gradient(145deg, #ffffff, #f1f5f9); 
            z-index: 10; 
            display: flex; 
            flex-direction: column; 
            align-items: center; 
            padding: 32px 16px; 
            transition: all 0.6s ease; 
            opacity: 0; 
            transform: scale(0.95); 
        }
        .wallet-case.active .id-card { 
            opacity: 1; 
            transform: scale(1); 
            z-index: 40; 
        }

        /* QR Container */
        .snake-glow { 
            position: relative; 
            padding: 8px; 
            background: white; 
            border-radius: 24px; 
            border: 3px solid #3b82f6; 
            width: fit-content;
            margin: 0 auto;
        }
        #qrcode canvas { 
            width: 100% !important; 
            height: auto !important; 
            max-width: 200px; 
            display: block;
        }
        .qr-logo { 
            position: absolute; 
            top: 50%; 
            left: 50%; 
            transform: translate(-50%, -50%); 
            width: 48px; 
            height: 48px; 
            background: white; 
            border-radius: 50%; 
            padding: 3px; 
            z-index: 10; 
            box-shadow: 0 4px 15px rgba(0,0,0,0.1); 
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .qr-logo svg { 
            width: 100%; 
            height: 100%; 
            border-radius: 50%; 
        }

        /* Scanner Modal */
        .scan-box { 
            position: relative; 
            width: 100%; 
            aspect-ratio: 1/1; 
            background: #000; 
            border-radius: 24px; 
            overflow: hidden; 
            border: 2px solid #3b82f6; 
        }
        .laser { 
            position: absolute; 
            width: 100%; 
            height: 4px; 
            background: #3b82f6; 
            box-shadow: 0 0 25px #3b82f6; 
            animation: move 2s ease-in-out infinite; 
            z-index: 5; 
        }
        @keyframes move { 
            0%, 100% { top: 5%; } 
            50% { top: 95%; } 
        }
        #reader video { 
            width: 100% !important; 
            height: 100% !important; 
            object-fit: cover !important; 
        }

        /* Bottom Nav - 3 BUTTONS NOW */
        .bottom-nav { 
            margin-top: 24px; 
            display: flex; 
            gap: 20px; 
            align-items: center; 
            justify-content: center;
            width: 100%;
            max-width: 380px;
            flex-wrap: wrap;
        }
        .nav-item { 
            display: flex; 
            flex-direction: column; 
            align-items: center; 
            cursor: pointer; 
        }
        .nav-btn { 
            background: white; 
            padding: 14px; 
            border-radius: 24px; 
            box-shadow: 0 12px 24px rgba(0,0,0,0.04); 
            color: #1e293b; 
            transition: all 0.25s ease; 
            border: 1px solid #ffffff; 
            display: flex; 
            align-items: center; 
            justify-content: center; 
            width: 56px; 
            height: 56px; 
        }
        .nav-btn:active { 
            transform: scale(0.92); 
        }
        .nav-label { 
            font-size: 11px; 
            font-weight: 700; 
            color: #334155; 
            margin-top: 8px; 
            letter-spacing: 0.5px; 
            text-transform: uppercase; 
            background: #eef2f6; 
            padding: 4px 12px; 
            border-radius: 40px; 
            white-space: nowrap;
        }

        /* Modal Responsive */
        .modal { 
            position: fixed; 
            inset: 0; 
            background: rgba(15, 23, 42, 0.95); 
            backdrop-filter: blur(10px); 
            z-index: 100; 
            display: none; 
            align-items: center; 
            justify-content: center; 
            padding: 20px; 
        }
        .modal > div { 
            max-width: 380px; 
            width: 100%; 
        }

        /* ----- INSPECTOR BLOCKER ‚Äî DESKTOP ONLY ----- */
        .inspector-blocker {
            position: fixed;
            inset: 0;
            background: radial-gradient(circle at 30% 40%, #0a0f1e, #020617);
            backdrop-filter: blur(16px);
            -webkit-backdrop-filter: blur(16px);
            z-index: 999999;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 1.5rem;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.6s cubic-bezier(0.16, 1, 0.3, 1);
            border: 1px solid rgba(255,215,0,0.15);
            box-shadow: inset 0 0 120px rgba(0,0,0,0.8);
        }
        .inspector-blocker.active {
            opacity: 1;
            pointer-events: all;
        }
        .cyber-grid {
            position: absolute;
            width: 100%;
            height: 100%;
            background-image: 
                linear-gradient(rgba(34, 197, 94, 0.1) 1px, transparent 1px),
                linear-gradient(90deg, rgba(34, 197, 94, 0.1) 1px, transparent 1px);
            background-size: 45px 45px;
            animation: gridShift 14s linear infinite;
            opacity: 0.25;
        }
        @keyframes gridShift {
            0% { transform: translate(0,0); }
            100% { transform: translate(45px,45px); }
        }
        .glitch {
            font-size: clamp(2rem, 8vw, 3.8rem);
            font-weight: 900;
            text-transform: uppercase;
            color: white;
            letter-spacing: 6px;
            position: relative;
            text-shadow: 0.05em 0 0 rgba(255,0,0,0.7), -0.05em -0.025em 0 rgba(0,255,0,0.5), 0.025em 0.05em 0 rgba(0,0,255,0.5);
            animation: glitch 725ms infinite;
        }
        @keyframes glitch {
            0% { text-shadow: 0.05em 0 0 rgba(255,0,0,0.7), -0.05em -0.025em 0 rgba(0,255,0,0.5), 0.025em 0.05em 0 rgba(0,0,255,0.5); }
            14% { text-shadow: 0.05em 0 0 rgba(255,0,0,0.7), -0.05em -0.025em 0 rgba(0,255,0,0.5), 0.025em 0.05em 0 rgba(0,0,255,0.5); }
            15% { text-shadow: -0.05em -0.025em 0 rgba(255,0,0,0.7), 0.025em 0.025em 0 rgba(0,255,0,0.5), -0.05em -0.05em 0 rgba(0,0,255,0.5); }
            49% { text-shadow: -0.05em -0.025em 0 rgba(255,0,0,0.7), 0.025em 0.025em 0 rgba(0,255,0,0.5), -0.05em -0.05em 0 rgba(0,0,255,0.5); }
            50% { text-shadow: 0.025em 0.05em 0 rgba(255,0,0,0.7), 0.05em 0 0 rgba(0,255,0,0.5), 0 -0.05em 0 rgba(0,0,255,0.5); }
            99% { text-shadow: 0.025em 0.05em 0 rgba(255,0,0,0.7), 0.05em 0 0 rgba(0,255,0,0.5), 0 -0.05em 0 rgba(0,0,255,0.5); }
            100% { text-shadow: 0.05em 0 0 rgba(255,0,0,0.7), -0.05em -0.025em 0 rgba(0,255,0,0.5), 0.025em 0.05em 0 rgba(0,0,255,0.5); }
        }
        .block-card {
            background: rgba(10, 20, 35, 0.65);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(250,204,21,0.3);
            border-radius: 48px;
            padding: clamp(24px, 6vw, 40px) clamp(20px, 5vw, 30px);
            max-width: 550px;
            width: 100%;
            box-shadow: 0 25px 50px -8px black;
            position: relative;
            z-index: 10;
            animation: cardAppear 0.8s cubic-bezier(0.34, 1.56, 0.64, 1);
        }
        @keyframes cardAppear {
            0% { opacity: 0; transform: scale(0.9) translateY(30px); }
            100% { opacity: 1; transform: scale(1) translateY(0); }
        }
        .email-3d {
            background: linear-gradient(145deg, #facc15, #eab308);
            border: none;
            padding: 14px 30px;
            border-radius: 60px;
            color: black;
            font-weight: 900;
            font-size: 1.2rem;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            box-shadow: 0 12px 0 #92400e, 0 20px 40px rgba(250,204,21,0.4);
            transition: all 0.08s linear;
            text-transform: uppercase;
            letter-spacing: 2px;
            cursor: pointer;
            margin-top: 20px;
            border: 1px solid rgba(255,255,255,0.3);
            width: 100%;
            word-break: break-word;
        }
        .email-3d:active {
            transform: translateY(8px);
            box-shadow: 0 5px 0 #92400e, 0 25px 40px rgba(250,204,21,0.4);
        }
        .email-3d svg {
            width: 28px;
            height: 28px;
            stroke: black;
            stroke-width: 1.8;
            flex-shrink: 0;
        }
        @media (max-width: 1024px) {
            .inspector-blocker {
                display: flex;
            }
        }
    </style>
</head>
<body>

    <!-- ========== üõ°Ô∏è INSPECTOR BLOCKER ========= -->
    <div id="inspectorBlocker" class="inspector-blocker">
        <div class="cyber-grid"></div>
        <div class="block-card text-center relative">
            <div class="flex justify-center mb-4">
                <svg width="80" height="80" viewBox="0 0 100 100" fill="none">
                    <rect x="25" y="45" width="50" height="40" rx="12" stroke="#facc15" stroke-width="4" fill="#0f172a" />
                    <circle cx="50" cy="65" r="10" fill="#facc15" />
                    <path d="M35 45 L35 30 C35 20, 45 12, 65 12 C80 12, 90 22, 90 35 L90 45" stroke="#ef4444" stroke-width="6" stroke-dasharray="8 6" fill="none" />
                    <circle cx="50" cy="65" r="4" fill="black" />
                    <path d="M30 85 L70 85" stroke="#facc15" stroke-width="4" stroke-linecap="round" />
                </svg>
            </div>
            <h1 class="glitch">üîí ACCESS DENIED</h1>
            <div class="text-white text-xl sm:text-2xl font-black mt-2 tracking-widest border-y-2 border-yellow-500/50 py-4 my-4">
                YOU SHALL NOT INSPECT!
            </div>
            <p class="text-slate-300 text-sm sm:text-base max-w-md mx-auto font-medium leading-relaxed">
                ‚ö° This code is protected by <span class="text-yellow-400 font-bold">Sadik Cyber Armor</span>. <br/>
                Developer tools & view source are <span class="text-red-400">permanently blocked</span> on desktop.
            </p>
            <div class="mt-6 bg-slate-900/60 p-5 rounded-3xl border border-slate-700">
                <p class="text-white text-xs sm:text-sm font-semibold mb-2 uppercase tracking-wider text-yellow-400">
                    üì© WANT THIS SOURCE CODE ?
                </p>
                <p class="text-slate-300 text-xs sm:text-sm">
                    Click the button below ‚Äî email will open with auto-filled message.
                </p>
            </div>
            <a id="emailProtectLink" href="#" class="email-3d" target="_blank">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M21.75 6.75v10.5a2.25 2.25 0 01-2.25 2.25h-15a2.25 2.25 0 01-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0019.5 4.5h-15a2.25 2.25 0 00-2.25 2.25m19.5 0v.243a2.25 2.25 0 01-1.07 1.916l-7.5 4.615a2.25 2.25 0 01-2.36 0L3.57 8.91a2.25 2.25 0 01-1.07-1.916V6.75" />
                </svg>
                noreply.sahab@gmail.com
            </a>
            <p class="text-xs text-slate-500 mt-6 border-t border-slate-800 pt-4">
                üõ°Ô∏è DESKTOP PROTECTION ‚Ä¢ DEVELOPER TOOLS BLOCKED
            </p>
        </div>
    </div>

    <!-- ========== ORIGINAL UI ========= -->
    <div class="wallet-case" id="wallet" onclick="this.classList.toggle('active')">
        <!-- QR CARD (FRONT) -->
        <div class="qr-card">
            <div class="mb-3 text-center" onclick="event.stopPropagation()">
                <p class="text-[8px] sm:text-[10px] font-black text-blue-500 uppercase tracking-[0.2em] mb-1">BHARAT INTERFACE FOR MONEY</p>
                <div class="flex items-center justify-center">
                    <span class="text-lg sm:text-xl font-bold text-slate-300 mr-1">‚Çπ</span>
                    <input type="number" id="amtInput" value="20" oninput="generateQR()" class="w-16 sm:w-20 text-2xl sm:text-4xl font-black text-center outline-none bg-transparent text-slate-800">
                </div>
            </div>

            <div class="snake-glow shadow-2xl">
                <div id="qrcode"></div>
                <div class="qr-logo">
                    <svg viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <circle cx="50" cy="40" r="25" fill="#3b82f6" stroke="#ffffff" stroke-width="4"/>
                        <circle cx="35" cy="32" r="5" fill="white"/>
                        <circle cx="65" cy="32" r="5" fill="white"/>
                        <path d="M35 50 Q50 65, 65 50" stroke="white" stroke-width="6" stroke-linecap="round" fill="none"/>
                        <rect x="25" y="65" width="50" height="25" rx="12" fill="#1e293b" stroke="#ffffff" stroke-width="3"/>
                        <text x="42" y="84" font-family="Arial" font-size="20" fill="white" font-weight="bold">S</text>
                    </svg>
                </div>
            </div>

            <div class="mt-4 sm:mt-6 flex flex-col items-center">
                <div class="flex items-center space-x-3 mb-3">
                    <svg width="50" height="20" viewBox="0 0 80 30" fill="none">
                        <rect x="2" y="5" width="30" height="20" rx="4" fill="#2563eb" />
                        <text x="8" y="21" fill="white" font-size="12" font-weight="bold">UPI</text>
                        <rect x="45" y="5" width="30" height="20" rx="4" fill="#0f172a" />
                        <text x="52" y="21" fill="white" font-size="10" font-weight="bold">BHARAT</text>
                    </svg>
                    <div class="w-px h-4 bg-slate-200"></div>
                    <svg width="50" height="20" viewBox="0 0 80 30" fill="none">
                        <rect x="2" y="5" width="30" height="20" rx="4" fill="#16a34a" />
                        <text x="8" y="21" fill="white" font-size="10" font-weight="bold">QR</text>
                    </svg>
                </div>
                <p class="text-[8px] sm:text-[9px] text-slate-400 font-bold uppercase tracking-[0.2em] sm:tracking-[0.3em]">SECURE ‚Ä¢ NPCI CERTIFIED ‚Ä¢ DIGITAL INDIA</p>
            </div>
        </div>

        <!-- ID CARD (BACK) -->
        <div class="id-card">
            <div class="w-full flex justify-between items-center mb-4 sm:mb-6">
                <svg width="40" height="16" viewBox="0 0 60 20" fill="none">
                    <rect x="2" y="2" width="30" height="16" rx="3" fill="#2563eb" />
                    <text x="8" y="15" fill="white" font-size="10" font-weight="bold">UPI</text>
                </svg>
                <span class="bg-blue-600 text-white text-[7px] sm:text-[8px] font-black px-2 sm:px-3 py-1 rounded-md uppercase tracking-widest">OFFICIAL ID</span>
            </div>

            <div id="idAvatar" class="w-24 h-24 sm:w-28 sm:h-28 rounded-full border-4 border-white shadow-2xl flex items-center justify-center bg-gradient-to-br from-blue-500 to-indigo-600 mb-3 sm:mb-4">
                <svg viewBox="0 0 100 100" width="80" height="80">
                    <circle cx="50" cy="40" r="30" fill="#facc15" stroke="white" stroke-width="4"/>
                    <circle cx="35" cy="30" r="6" fill="white"/>
                    <circle cx="65" cy="30" r="6" fill="white"/>
                    <path d="M35 55 Q50 75, 65 55" stroke="white" stroke-width="8" stroke-linecap="round" fill="none"/>
                    <rect x="30" y="70" width="40" height="20" rx="10" fill="#0f172a" stroke="white" stroke-width="3"/>
                    <text x="48" y="87" font-family="Arial" font-size="24" fill="white" font-weight="bold">S</text>
                </svg>
            </div>
            
            <h2 id="idName" class="text-xl sm:text-2xl font-black text-slate-800">Sadik Husain</h2>
            <p id="idUpi" class="text-blue-600 font-bold mt-1 text-xs sm:text-sm">mdsadiks486@okicici</p>
            <p id="msgDisplay" class="mt-3 sm:mt-4 text-xs text-slate-400 italic">"Thanks for Payment"</p>

            <div class="mt-auto opacity-30 flex justify-center">
                <svg width="40" height="24" viewBox="0 0 60 36">
                    <rect width="60" height="12" fill="#ff9933" />
                    <rect y="12" width="60" height="12" fill="white" />
                    <rect y="24" width="60" height="12" fill="#138808" />
                    <circle cx="30" cy="18" r="4" fill="#000080" />
                </svg>
            </div>
        </div>
    </div>

    <!-- ========== BOTTOM NAV - 3 BUTTONS: CAMERA, DOWNLOAD, SHARE, SETTINGS ========= -->
    <div class="bottom-nav">
        <!-- CAMERA -->
        <div class="nav-item" onclick="openScanner()">
            <div class="nav-btn">
                <svg class="w-6 h-6 sm:w-7 sm:h-7 text-blue-600" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8">
                    <path d="M2.25 6.75C2.25 5.09315 3.59315 3.75 5.25 3.75H6.43116C7.15029 3.75 7.82184 3.39664 8.23108 2.82108L8.94392 1.82108C9.35316 1.24552 10.0247 0.892158 10.7438 0.892158H13.2562C13.9753 0.892158 14.6468 1.24552 15.0561 1.82108L15.7689 2.82108C16.1782 3.39664 16.8497 3.75 17.5688 3.75H18.75C20.4069 3.75 21.75 5.09315 21.75 6.75V16.5C21.75 18.1569 20.4069 19.5 18.75 19.5H5.25C3.59315 19.5 2.25 18.1569 2.25 16.5V6.75Z"/>
                    <circle cx="12" cy="11.25" r="3.75"/>
                    <line x1="19.5" y1="9" x2="19.5" y2="9.75"/>
                </svg>
            </div>
            <span class="nav-label">üì∑ CAMERA</span>
        </div>

        <!-- DOWNLOAD QR - NEW -->
        <div class="nav-item" onclick="downloadQR()">
            <div class="nav-btn">
                <svg class="w-6 h-6 sm:w-7 sm:h-7 text-green-600" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8">
                    <path d="M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5M16.5 12L12 16.5m0 0L7.5 12m4.5 4.5V3" stroke-linecap="round"/>
                </svg>
            </div>
            <span class="nav-label">‚¨áÔ∏è DOWNLOAD</span>
        </div>

        <!-- SHARE QR - NEW -->
        <div class="nav-item" onclick="shareQR()">
            <div class="nav-btn">
                <svg class="w-6 h-6 sm:w-7 sm:h-7 text-purple-600" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8">
                    <path d="M7.217 10.907a2.25 2.25 0 100 2.186m0-2.186c.18.324.283.696.283 1.093s-.103.77-.283 1.093m0-2.186l9.566-5.314m-9.566 7.5l9.566 5.314m0 0a2.25 2.25 0 103.935 2.186 2.25 2.25 0 00-3.935-2.186zm0-12.814a2.25 2.25 0 103.933-2.185 2.25 2.25 0 00-3.933 2.185z" stroke-linecap="round"/>
                </svg>
            </div>
            <span class="nav-label">üì§ SHARE</span>
        </div>

        <!-- SETTINGS -->
        <div class="nav-item" onclick="openSettings()">
            <div class="nav-btn">
                <!-- iOS STYLE SETTINGS ICON - CLEAN, MINIMAL, PERFECT PROPORTIONS -->
                <svg class="w-6 h-6 sm:w-7 sm:h-7 text-slate-700" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M12 3.5L12 5.5M12 3.5C10.8 3.5 9.65 3.85 8.68 4.5L7.5 3.3M8.68 4.5C7.45 5.25 6.5 6.35 5.9 7.65L4.4 7.2M5.9 7.65C5.35 8.8 5.05 10.1 5.05 11.45L3.2 11.6M5.05 11.45C5.05 12.8 5.4 14.1 6 15.25L4.55 16M6 15.25C6.6 16.5 7.5 17.6 8.68 18.35L7.6 19.65M8.68 18.35C9.6 18.95 10.7 19.3 11.85 19.35L12 21.2M11.85 19.35C13 19.3 14.15 18.95 15.12 18.3L16.25 19.55M15.12 18.3C16.3 17.55 17.25 16.45 17.9 15.2L19.4 15.65M17.9 15.2C18.5 14 18.85 12.65 18.9 11.3L20.75 11.15M18.9 11.3C18.85 9.95 18.5 8.65 17.85 7.5L19.3 6.75M17.85 7.5C17.25 6.3 16.35 5.25 15.22 4.5L16.25 3.2M15.22 4.5C14.25 3.9 13.15 3.55 12 3.5L12 5.5" stroke="currentColor" stroke-width="1.8" fill="none"/>
                    <circle cx="12" cy="12" r="3.2" stroke="currentColor" stroke-width="1.8" fill="none"/>
                    <circle cx="12" cy="12" r="1.1" fill="currentColor" stroke="none"/>
                </svg>
            </div>
            <span class="nav-label">‚öôÔ∏è SETTINGS</span>
        </div>
    </div>

    <!-- MODALS (SCANNER & SETTINGS) -->
    <div id="scanModal" class="modal">
        <div class="bg-white w-full rounded-[32px] sm:rounded-[40px] p-6 sm:p-8 text-center shadow-2xl">
            <h3 class="text-lg sm:text-xl font-black text-slate-800 mb-4 sm:mb-6 uppercase tracking-tight">Bharat QR Scanner</h3>
            <div class="scan-box"><div class="laser"></div><div id="reader"></div></div>
            <div class="grid grid-cols-2 gap-3 sm:gap-4 mt-6 sm:mt-8">
                <button onclick="closeScanner()" class="bg-slate-100 text-slate-500 font-bold py-3 sm:py-4 rounded-2xl uppercase text-xs sm:text-sm">Cancel</button>
                <label class="bg-blue-600 text-white font-bold py-3 sm:py-4 rounded-2xl cursor-pointer uppercase text-xs sm:text-sm flex items-center justify-center">
                    GALLERY <input type="file" accept="image/*" class="hidden" onchange="uploadQR(event)">
                </label>
            </div>
        </div>
    </div>

    <div id="setModal" class="modal">
        <div class="bg-white w-full rounded-[32px] sm:rounded-[40px] p-6 sm:p-8 space-y-3 sm:space-y-4">
            <h3 class="text-lg sm:text-xl font-black text-slate-800 text-center uppercase">Profile Setup</h3>
            <input type="text" id="inUpi" placeholder="UPI ID" class="w-full p-3 sm:p-4 bg-slate-50 rounded-2xl outline-none font-semibold border-none text-sm sm:text-base">
            <input type="text" id="inName" placeholder="Full Name" class="w-full p-3 sm:p-4 bg-slate-50 rounded-2xl outline-none font-semibold border-none text-sm sm:text-base">
            <input type="text" id="inImg" placeholder="Image URL (optional)" class="w-full p-3 sm:p-4 bg-slate-50 rounded-2xl outline-none font-semibold border-none text-sm sm:text-base">
            <input type="text" id="inMsg" placeholder="Auto Message" class="w-full p-3 sm:p-4 bg-slate-50 rounded-2xl outline-none font-semibold border-none text-sm sm:text-base">
            <button onclick="save()" class="w-full bg-slate-900 text-white py-4 sm:py-5 rounded-2xl font-black shadow-xl text-sm sm:text-base">SAVE</button>
            <button onclick="document.getElementById('setModal').style.display='none'" class="w-full text-slate-400 font-bold text-xs sm:text-sm uppercase">Close</button>
        </div>
    </div>

    <script>
        // ========== EMAIL AUTO-FILL ==========
        function setupEmailProtection() {
            const emailLink = document.getElementById('emailProtectLink');
            if (emailLink) {
                const recipient = 'noreply.sahab@gmail.com';
                const subject = 'Request for Source Code - Sadik Bharat Premium ID';
                const body = 'Hello Bhai,%0D%0A%0D%0AI tried to inspect the page but got blocked by your awesome security system. I am really interested in your code. Could you please share the source code? I appreciate your work!%0D%0A%0D%0AThanks,%0D%0AA Developer';
                const mailtoUrl = `https://mail.google.com/mail/?view=cm&fs=1&to=${recipient}&su=${encodeURIComponent(subject)}&body=${body}`;
                emailLink.href = mailtoUrl;
            }
        }

        // ========== DESKTOP-ONLY INSPECTOR BLOCKER ==========
        (function() {
            "use strict";
            const blocker = document.getElementById('inspectorBlocker');
            let isDesktop = !/Mobi|Android|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);

            function showBlocker() {
                if (isDesktop) {
                    blocker.classList.add('active');
                    document.body.style.overflow = 'hidden';
                    setupEmailProtection();
                }
            }

            if (isDesktop) {
                document.addEventListener('contextmenu', (e) => { e.preventDefault(); showBlocker(); return false; });
                
                document.addEventListener('keydown', (e) => {
                    if (e.key === 'F12' || e.code === 'F12' || e.keyCode === 123 ||
                        (e.ctrlKey && e.shiftKey && (e.key === 'I' || e.key === 'i' || e.keyCode === 73)) ||
                        (e.ctrlKey && e.shiftKey && (e.key === 'J' || e.key === 'j' || e.keyCode === 74)) ||
                        (e.ctrlKey && (e.key === 'U' || e.key === 'u' || e.keyCode === 85)) ||
                        (e.metaKey && e.altKey && (e.key === 'I' || e.keyCode === 73)) ||
                        (e.metaKey && e.shiftKey && (e.key === 'C' || e.keyCode === 67))) {
                        e.preventDefault();
                        e.stopPropagation();
                        showBlocker();
                        return false;
                    }
                });

                let devtoolsOpen = false;
                const element = new Image();
                Object.defineProperty(element, 'id', { get: function() { devtoolsOpen = true; showBlocker(); return 'devtools'; } });
                setInterval(() => { devtoolsOpen = false; console.log(element); if (devtoolsOpen) showBlocker(); }, 800);
                setInterval(() => { const start = new Date().getTime(); debugger; const end = new Date().getTime(); if (end - start > 100) showBlocker(); }, 500);
            }

            document.addEventListener('selectstart', (e) => e.preventDefault());
            document.addEventListener('copy', (e) => { if (isDesktop) { e.preventDefault(); showBlocker(); } });
        })();

        // ========== QR CODE FUNCTIONS ==========
        let upi = "mdsadiks486@okicici", name = "Sadik Husain", icon = "", autoMsg = "Thanks for Payment";
        let html5QrCode;
        let qrcode = new QRCode(document.getElementById("qrcode"), { width: 200, height: 200, colorDark: "#000000", colorLight: "#ffffff", correctLevel: QRCode.CorrectLevel.H });

        function generateQR() {
            let a = document.getElementById('amtInput').value || 0;
            qrcode.clear();
            qrcode.makeCode(`upi://pay?pa=${upi}&pn=${encodeURIComponent(name)}&am=${a}&tn=${encodeURIComponent(autoMsg)}&cu=INR`);
        }

        // ========== DOWNLOAD QR CODE ==========
        function downloadQR() {
            const canvas = document.querySelector('#qrcode canvas');
            if (!canvas) {
                alert('QR Code not found!');
                return;
            }
            const link = document.createElement('a');
            link.download = `sadik-qr-${upi.split('@')[0]}.png`;
            link.href = canvas.toDataURL('image/png');
            link.click();
        }

        // ========== SHARE QR CODE (WEB SHARE API) ==========
        function shareQR() {
            const canvas = document.querySelector('#qrcode canvas');
            if (!canvas) {
                alert('QR Code not found!');
                return;
            }
            
            canvas.toBlob(function(blob) {
                const file = new File([blob], 'sadik-qr.png', { type: 'image/png' });
                if (navigator.share) {
                    navigator.share({
                        title: 'Sadik Bharat UPI QR',
                        text: `Pay ‚Çπ${document.getElementById('amtInput').value || 0} to ${name} (${upi})`,
                        files: [file]
                    }).catch((error) => {
                        if (error.name !== 'AbortError') {
                            fallbackShare();
                        }
                    });
                } else {
                    fallbackShare();
                }
            }, 'image/png');
        }

        function fallbackShare() {
            const canvas = document.querySelector('#qrcode canvas');
            const link = document.createElement('a');
            link.download = `sadik-qr-${upi.split('@')[0]}.png`;
            link.href = canvas.toDataURL('image/png');
            link.click();
            alert('Share not supported, QR downloaded instead!');
        }

        // ========== SCANNER FUNCTIONS ==========
        async function openScanner() {
            document.getElementById('scanModal').style.display = 'flex';
            html5QrCode = new Html5Qrcode("reader");
            const config = { fps: 20, qrbox: 240, aspectRatio: 1.0 };
            try { await html5QrCode.start({ facingMode: "environment" }, config, (data) => parseUPI(data)); } 
            catch (e) { try { await html5QrCode.start({ facingMode: "user" }, config, (data) => parseUPI(data)); } catch (err) { alert("Camera Error"); closeScanner(); } }
        }

        async function closeScanner() {
            if (html5QrCode && html5QrCode.isScanning) { await html5QrCode.stop(); html5QrCode.clear(); }
            document.getElementById('scanModal').style.display = 'none';
        }

        function uploadQR(e) {
            const file = e.target.files[0];
            if (!file) return;
            const s = new Html5Qrcode("reader");
            s.scanFile(file, true).then(data => { parseUPI(data); s.clear(); }).catch(err => alert("No UPI QR found"));
        }

        function parseUPI(data) {
            if (data.includes("upi://pay")) {
                const p = new URLSearchParams(data.split('?')[1]);
                upi = p.get('pa') || upi; name = p.get('pn') || name;
                document.getElementById('idUpi').innerText = upi;
                document.getElementById('idName').innerText = name;
                generateQR(); closeScanner();
            }
        }

        // ========== SETTINGS ==========
        function openSettings() {
            document.getElementById('setModal').style.display = 'flex';
            document.getElementById('inUpi').value = upi; 
            document.getElementById('inName').value = name; 
            document.getElementById('inImg').value = ''; 
            document.getElementById('inMsg').value = autoMsg;
        }

        function save() {
            upi = document.getElementById('inUpi').value; 
            name = document.getElementById('inName').value; 
            icon = document.getElementById('inImg').value; 
            autoMsg = document.getElementById('inMsg').value;
            document.getElementById('idUpi').innerText = upi; 
            document.getElementById('idName').innerText = name; 
            document.getElementById('msgDisplay').innerText = `"${autoMsg}"`;
            generateQR(); 
            document.getElementById('setModal').style.display = 'none';
        }

        window.onload = generateQR;
    </script>
</body>
</html>
